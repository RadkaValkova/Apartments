{% extends 'shared/base_tamplete.html' %}
{% load my_tags %}
{% block head_title %}Всички обяви{% endblock %}

{% block styles %}
    <style>
        body {
            background-image: url('/static/images/home_page_picture_changed3.jpg')
        }
    </style>
{% endblock %}

{% block content %}
    <div class="container">
        <form action="#" method="get" style="text-align: center; padding-bottom: 40px">
            <h4>Може да разгледате всичките ни обяви или да потърсите имот по желани от Вас критерии.</h4>
            {{ form.as_p }}
            <button type="submit" class="btn btn btn-secondary">Филтрирай</button>
            <a href="{% url 'all aparts' %}" class="btn btn-primary">Изчисти филтъра</a>
        </form>
    </div>
    <div class="container">
        <div class="row row-cols-1 row-cols-md-5 g-4">
            {% if aparts %}
                {% for apart in aparts %}
                    <div class="col">
                        <div class="card h-100">
                            <img src="{{ apart.image.url }}" class="card-img-top" alt="....">
                            <div class="card-body">
                                <h6 class="card-title"> Тип: {{ apart.type }}</h6>
                                <h6 class="card-title"> Град: {{ apart.town }}</h6>
                                <h6 class="card-title"> Цена: {{ apart.price_offer }} EUR</h6>
                                <h6 class="card-title"> РЗП: {{ apart.total_area }} m2</h6>
                                <h6 class="card-title"> Конструкция: {{ apart.construction }}</h6>
                                <h6 class="card-title"> Година на построяване: {{ apart.construction_year }} год.</h6>
                                <a href="{% url 'apart details' apart.id %}"
                                   class="btn btn-lg btn-secondary">Детайли</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
                {#                <div class="pagination">#}
                {#                    <span class="step-links">#}
                {#                        {% if page_obj.has_previous %}#}
                {#                            <a href="?page=1">&laquo; first</a>#}
                {#                            <a href="?page={{ page_obj.previous_page_number }}">previous</a>#}
                {#                        {% endif %}#}
                {##}
                {#                        <span class="current">#}
                {#                            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.#}
                {#                        </span>#}
                {##}
                {#                        {% if page_obj.has_next %}#}
                {#                            <a href="?page={{ page_obj.next_page_number }}">next</a>#}
                {#                            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>#}
                {#                        {% endif %}#}
                {#                    </span>#}
                {#                </div>#}
            {% else %}
                <div class="col-12" style="text-align: center; font-size: 20px; font-style: italic; color: orangered">
                    <p>Няма намерени резултати от Вашето търсене.</p>
                </div>
            {% endif %}
        </div>
    </div>

{#{% if is_paginated %}#}
  {% if aparts.has_previous %}
    <a href="?{% param_replace page=1 %}">First</a>
    {% if aparts.previous_page_number != 1 %}
      <a href="?{% param_replace page=aparts.previous_page_number %}">Previous</a>
    {% endif %}
  {% endif %}

  Page {{ aparts.number }} of {{ paginator.num_pages }}

  {% if aparts.has_next %}
    {% if aparts.next_page_number != paginator.num_pages %}
      <a href="?{% param_replace page=aparts.next_page_number %}">Next</a>
    {% endif %}
    <a href="?{% param_replace page=paginator.num_pages %}">Last</a>
  {% endif %}

  <p>Objects {{ aparts.start_index }}—{{ aparts.end_index }}</p>
{#{% endif %}#}

{% endblock %}